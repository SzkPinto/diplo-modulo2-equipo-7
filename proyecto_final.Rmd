+ Administrador del repositorio
---
title: "Proyecto final módulo 2"
author: "Equipo - 7"
output: html_document
---

# Integrantes:

+ Integrante 1. Rol: Administrador. Reyna Suzuky Pinto González.
+ Integrante 2. Rol: Colaborador 1. Isaac Mejia Montes de Oca.
+ Integrante 3. Rol: Colaborador 2. Sinaí Espinosa Vargas.

```{r}
library(DBI)
library(dbplyr)
library(RSQLite)
library(visdat)

conn <- DBI::dbConnect(RSQLite::SQLite(), "vuelos.db")
```

+ Colaborador 1

```{r}
(tablas <- dbListTables(conn))
(length(tablas))
```

+ Colaborador 2

Para cada tabla de la base de datos, se crea un objeto en R:

```{r}
aerolineas <- dbGetQuery(conn, paste0("SELECT * FROM ",tablas[1]))
aeropuertos <- dbGetQuery(conn, paste0("SELECT * FROM ",tablas[2]))
aviones <- dbGetQuery(conn, paste0("SELECT * FROM ",tablas[3]))
clima <- dbGetQuery(conn, paste0("SELECT * FROM ",tablas[4]))
vuelos <- dbGetQuery(conn, paste0("SELECT * FROM ",tablas[5]))
```

A continuación, se aplicarán las funciones `vis_dat()` y `vis_miss()` a cada tabla de la base de datos.

**Base de datos: `aerolineas`**

```{r}
aerolineas |> vis_dat()
aerolineas |> vis_miss()
```

De acuerdo con la primer gráfica obtenida, podemos observar que el conjunto de datos `aerolineas` contiene 2 variables de tipo caracter. En la segunda gráfica se aprecia que no contienen datos faltantes.

**Base de datos: `aeropuertos`**

```{r}
aeropuertos |> vis_dat()
aeropuertos |> vis_miss()
```

En la primer gráfica, observamos que el conjunto de datos `aeropuertos` contiene 4 variables de tipo caracter y 4 variables de tipo numérico. En ambas gráficas observamos que la variable `tzone` es la única que contiene valores faltantes.

**Base de datos: `aeropuertos`**

```{r}
aviones |> vis_dat()
aviones |> vis_miss()
```

En la primer gráfica, observamos que el conjunto de datos `aviones` contiene 5 variables de tipo caracter y 4 variables de tipo entero. En la segunda gráfica observamos que las variables `year` y `speed` son las únicas que contienen valores faltantes, con un porcentaje del 2% y 99%, respectivamente.

**Base de datos: `clima`**

```{r}
clima |> vis_dat()
clima |> vis_miss()
```

De acuerdo con la primer gráfica, observamos que el conjunto de datos `clima` contiene 1 variable de tipo caracter, 4 variables de tipo entero y 10 variables numéricas. En la segunda gráfica observamos que las variables `temp`, `dewp`, `humid`, `wind_dir`, `wind_speed`, `wind_gust` y `pressure` contienen valores faltantes.

**Base de datos: `vuelos`**

En cuanto al conjunto de datos `vuelos`, se intentaron ejecutar las siguientes sentencias:

```
vuelos[,1:2] |> vis_dat()
vuelos |> vis_miss()
```

... sin embargo, generaron el siguiente error: "! Data exceeds recommended size for visualisation". Por lo tanto, se obtendrá la información de manera manual:

```{r}
# Se obtiene el tipo de dato de las variables
aux <- data.frame()
for(i in 1:ncol(vuelos)){
  aux <- rbind(aux,vuelos[[i]] %>% class())
}

colnames(aux) <- "tipo_dato"
aux %>%
  group_by(tipo_dato) %>% 
  summarise(n = n())
```

Observamos que el conjunto de datos `clima` contiene 4 variables de tipo caracter, 8 variables de tipo entero y 7 variables numéricas. 

```{r}
# Se obtiene el numero de valores faltantes por variable
vuelos %>% is.na() %>% apply(2,sum)
```

Las variables que contienen datos faltantes son: `dep_time`, `dep_delay`, `arr_time`, `arr_delay`, `tailnum` y `air_time`.

5. Administrador del equipo
+ Uso de librería skimr
Desde su máquina crear chunks de código R en el archivo "proyecto_final.Rmd" (que obtuvo del Administrador) que use funciones de la librería {skimr} para obtener un resumen del tipo de variables, resumen de variables numéricas y resumen de variables categóricas para cada uno de los datasets que creo el Colaborador 1. Hacer commit y push del código al repositorio del administrador y revisar los pull requests de los colaboradores 1 y 2.

```{r}
library(skimr)
```

+ dataset 'aerolineas'

```{r}
skim(aerolineas)


```
+ el dataset 'aerolineas' contiene solamente dos variables, ambas de tipo caracter: 'carrier' y 'name'. No hay datos faltantes en ninguna de ellas ni celdas vacías. Cada variables tiene 16 renglones unicos.

```{r}
skim(dplyr:: select(aerolineas, where(is.numeric)))
skim(dplyr:: select(aerolineas, where(is.character)))
```
+ Sabemos que no hay variables numéricas en este dataset


+ Ahora analizamos el dataset 'aeropuertos'

```{r}
skim(aeropuertos)

```

+ Se observa que el dataset 'aeropuertos' contiene 8 columnas, 4 son variables de tipo numérico y 4 de tipo character.


+ Analizamos separando,  solo las numericas o solo las categóricas usando select()


```{r}
skim(dplyr:: select(aeropuertos, where(is.numeric)))
skim(dplyr:: select(aeropuertos, where(is.character)))
```


+ Se observa que no hay datos faltantes en ninguna variable, escepto en tzone que registra 3 n_missing values. 


+ Analizamos ahora el dataset 'aviones'

```{r}
skim(aviones)

```

+ La salida muestra que este dataset contiene 9 columnas, 5 son variables tipo character y 4 tipo numerico. Del grupo de variables numéricas hay dos con datos faltantes, speed que tiene 3299 y year con 70. Las variables categóricas no tienen missing data.



+ Ahora analizamos el dataset 'clima'

```{r}
skim(clima)

```
+ En el dataset clima, se observan 15 columnas, solo una tipo character ('origin'). De las variables numericas solamente 4 no tienen datos faltantes: year, month, day, hour.


+ Ahora analizamos el dataset 'vuelos'

```{r}
skim(vuelos)

```
+ El dataset 'vuelos' contiene 19 columnas, la mayoría de ellas son variables numéricas y solamente 4 son tipo character. Se observa que contienen 336776 renglones.De las variables character, solamente 'tailnum' tiene datos faltantes.
+ En el grupo de las variables numéricas, dep_time, dep_delay, arr_time y arr_delay tienen datos faltantes.
skim(aeropuertos)
skim(aviones)
skim(clima)
skim(vuelos)
